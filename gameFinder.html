<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <!-- imports -->
    <!-- Latest compiled and minified CSS -->
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
    <!-- Optional theme -->
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css'>
    <!-- Font Awesome minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- jQuery -->
    <script src='https://code.jquery.com/jquery-2.1.0.min.js'></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>

    <script src='//cathrach.github.io/gwc/tabletop-1.4.2/src/tabletop.js'></script>

    <script src='//cathrach.github.io/gwc/gameFinder.js'></script>

    <title>Game Finder</title>
  </head>
  <body>
    <div class='container-fluid' style='margin-left: 250px; margin-right: 250px; padding: 5px; margin-top: 15px;'>
      <img src="http://blog.entheosweb.com/wp-content/uploads/2012/01/blue_header_s.jpg" style="width: 1090px; height: 200px">
      <h1>Game Frontier</h1>
      <div class='input-group' style='margin-bottom: 5px;'>
        <span class='input-group-btn'>
          <button class='btn btn-primary' type='button' id='searchNameBtn'><i class='fa fa-search'></i></button>
        </span>
        <input type='search' placeholder='Search name.' class='form-control' id='searchNameField' style='margin-right: 10px;'>
      </div>
      <div class='input-group' style='margin-bottom: 5px;'>
        <span class='input-group-btn'>
          <button class='btn btn-primary' type='button' id='searchDevBtn'><i class='fa fa-search'></i></button>
        </span>
        <input type='search' placeholder='Search developer.' class='form-control' id='searchDevField'>
      </div>
      <div class='container-fluid' style='width: 175px; float: left; margin-left: -10px; margin-top: 10px; border-style: solid; border-radius: 10px; border-color: teal; background: #00B0B0'>
        <input type='checkbox' name='sorting' value='category1'/><b>Category 1</b><br>
        <input type='checkbox' name='sorting' value='category2'/><b>Category 2</b><br>
        <button class='btn btn-primary' type='button' id='filter'>Filter</button>
      </div>
      <div class='container-fluid' style='width: 700px; float: right;' id='gameView'>
      </div>
    </div>

    <script type='text/javascript'>

      function searchName(game_name) {
        shown = [];
        var query = game_name.toLowerCase().replace(/^\s\s*/, '').replace(/\s\s*$/, '');
        if (query.length < 2) {
          $(gameView).html('<h4><b>Not enough characters. Try again.</b></h4>');
        } else {
          for (var game in gameList) {
            if (gameList[game]['name'].toLowerCase().search(query) != -1) {
              shown.push(gameList[game]['collapsedInfo']);
            }
          }
          (shown.length === 0) ? $(gameView).html('No results found.') : $(gameView).html(shown.join(' '));
        }
      }

      function searchDev(dev_name) {
        shown = [];
        var query = dev_name.toLowerCase().replace(/^\s\s*/, '').replace(/\s\s*$/, '');
        if (query.length < 2) {
          $(gameView).html('<h4><b>Not enough characters. Try again.</b></h4>');
        } else {
          for (var game in gameList) {
            if (gameList[game]['developer'].toLowerCase().search(query) != -1) {
              shown.push(gameList[game]['collapsedInfo']);
            }
          }
          (shown.length === 0) ? $(gameView).html('No results found.') : $(gameView).html(shown.join(' '));
        }
      }

      $(document).ready( function(e) {
        gameList = [];
        Tabletop.init( {
          key: '1SJr0dKWrsxPr2Y0D3NqLIfiS8Bnen7khEk5wsH6R2ZY',
          callback: buildList,
          simpleSheet: true
        });

        $('#searchNameField').keypress( function(e) {
          if (e.keyCode == 13) {
            searchName($('#searchNameField').val());
          }
        })

        $('#searchDevField').keypress( function(e) {
          if (e.keyCode == 13) {
            searchDev($('#searchDevField').val());
          }
        })
      })
    </script>
  </body>
</html>


<!-- game div -->
<!--
  width 650, height: 250
  name
  icon: 150 by 150
  developer
  screenshot on side: clicking on it brings up modal slideshow
  on the side (absolute position):
  tags: up to 2 per line or something :P
  external app store link on bottom
-->
