<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <!-- imports -->

    <!-- Latest compiled and minified CSS -->
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css'>
    <!-- Optional theme -->
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.css'>
    <!-- Font Awesome minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css">

    <link rel='stylesheet' href='gameFinder.css'>
    <!-- jQuery -->
    <script src='jquery-2.1.4.js'></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js'></script>

    <script src='//cathrach.github.io/gwc/tabletop-1.4.2/src/tabletop.js'></script>

    <script src='//cathrach.github.io/gwc/gameFinder.js'></script>

    <title>Game Finder</title>
  </head>
  <body>

    <div class='container-fluid' id='container'>
      <img src="http://www.bluepeapod.com/wp-content/themes/delicate/images/header/headers.jpg" style="width: 1090px; height: 200px">
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#" id="name">Home</a></li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false" id="name">Name <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li>
               <div class='input-group searchBar'>
                <span class='input-group-btn'>
                <button class='btn btn-primary' type='button' id='searchNameBtn'><i class='fa fa-search'></i></button>
                </span>
                <input type='search' placeholder='Search name.' class='form-control' id='searchNameField' style='margin-right: 10px;'>
                </div>
            </li>
            <li><a href="#">Page 1-2</a></li>
            <li><a href="#">Page 1-3</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false" id="name">Developer <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li>
                    <div class='input-group searchBar'>
                    <span class='input-group-btn'>
                    <button class='btn btn-primary' type='button' id='searchDevBtn'><i class='fa fa-search'></i></button>
                    </span>
                    <input type='search' placeholder='Search developer.' class='form-control' id='searchDevField'>
                    </div>
            </li>
            <li><a href="#">Page 1-2</a></li>
            <li><a href="#">Page 1-3</a></li>
          </ul>
        </li>
      </ul></div>

      <div class='container-fluid' id='filterBox'>
        <input type='checkbox' name='sorting' value='action'/><b> Action</b><br>
        <input type='checkbox' name='sorting' value='adventure'/><b> Adventure</b><br>
        <input type='checkbox' name='sorting' value='anime'/><b> Anime</b><br>
        <input type='checkbox' name='sorting' value='arcade'/><b> Arcade</b><br>
        <input type='checkbox' name='sorting' value='cartoon'/><b> Cartoon</b><br>
        <input type='checkbox' name='sorting' value='ccg'/><b> CCG</b><br>
        <input type='checkbox' name='sorting' value='endless'/><b> Endless</b><br>
        <input type='checkbox' name='sorting' value='energy'/><b> Energy</b><br>
        <input type='checkbox' name='sorting' value='first person'/><b> First Person</b><br>
        <input type='checkbox' name='sorting' value='gacha'/><b> Gacha</b><br>
        <input type='checkbox' name='sorting' value='match3'/><b> Match 3</b><br>
        <input type='checkbox' name='sorting' value='multiplayer'/><b> Multiplayer</b><br>
        <input type='checkbox' name='sorting' value='pixel'/><b> Pixelated</b><br>
        <input type='checkbox' name='sorting' value='ported'/><b> Ported</b><br>
        <input type='checkbox' name='sorting' value='rpg'/><b> Role Playing</b><br>
        <input type='checkbox' name='sorting' value='sandbox'/><b> Sandbox</b><br>
        <input type='checkbox' name='sorting' value='side scroller'/> Side Scroller</b><br>
        <input type='checkbox' name='sorting' value='strategy'/><b> Strategy</b><br>
        <input type='checkbox' name='sorting' value='third person'/><b> Third Person</b><br>
        <input type='checkbox' name='sorting' value='tower defense'/><b> Tower Defense</b><br>
        <input type='checkbox' name='sorting' value='free'/><b> Free</b><br>
        <input type='checkbox' name='sorting' value='paid'/><b> Paid</b><br>
        <input type='checkbox' name='sorting' value='IAP'/><b> IAP</b><br>
        <input type='checkbox' name='sorting' value='no IAP'/><b> No IAP</b><br>
        <button class='btn btn-primary' type='button' id='filter'>Filter</button>
      </div>

      <div id='gameModal' class='modal' role='dialog' aria-hidden='true' aria-labelledby='game-modal' tabindex='-1'>
        <div class='modal-dialog'>
          <div class='modal-content'>
            <div class='modal-header'>
              <button type='button' data-dismiss='modal'>&times;</button>
            </div>
            <div class='modal-body' style='position:relative;'>
              <div id='game-icon' style='border-radius:20px;'>
                <img src='#' style='width: 100px; height:100px;'>
              </div>
              <div id='game-info' style='position:absolute; top: 10px; left:120px;'>
              </div>
              <div id='game-rating' style='position:absolute; top: 30px; left: 120px;'>
              </div>
              <div id='game-tags' style='position:absolute; top: 120px;left:10px;'>
              </div>
              <div id='ios-version' style='position:absolute; top: 200px; left:10px;'>
              </div>
              <div id='info-page' style='height: position:absolute; '>
              </div>
            </div>
            <div class='modal-footer'>
              <button type='btn btn-default' data-dismiss='modal'>Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class='container-fluid' id='gameView'>
      </div>
    </div>

    <script type='text/javascript'>

      function searchName(game_name) {
        shown = [];
        var query = game_name.toLowerCase().replace(/^\s\s*/, '').replace(/\s\s*$/, '');
        if (query.length < 2) {
          $(gameView).html('<h4><b>Not enough characters. Try again.</b></h4>');
        } else {
          for (var game in gameList) {
            if (gameList[game]['name'].toLowerCase().search(query) != -1) {
              shown.push(gameList[game]['collapsedInfo']);
            }
          }
          (shown.length === 0) ? $(gameView).html('No results found.') : $(gameView).html(shown.join(' '));
        }
      }

      function searchDev(dev_name) {
        shown = [];
        var query = dev_name.toLowerCase().replace(/^\s\s*/, '').replace(/\s\s*$/, '');
        if (query.length < 2) {
          $(gameView).html('<h4><b>Not enough characters. Try again.</b></h4>');
        } else {
          for (var game in gameList) {
            if (gameList[game]['developer'].toLowerCase().search(query) != -1) {
              shown.push(gameList[game]['collapsedInfo']);
            }
          }
          (shown.length === 0) ? $(gameView).html('No results found.') : $(gameView).html(shown.join(' '));
        }
      }

      function filterByTags(tags) {
        shown = [];
        for (var game in gameList) {
          var add = true;
          for (var tag in tags) {
            if ($.inArray(tags[tag], gameList[game]['tags']) === -1) {
              add = false;
            }
          }
          if (add === true) {
            shown.push(gameList[game]['collapsedInfo']);
          }
        }
        (shown.length === 0) ? $(gameView).html('No games satisfy these. Make one yourself!') : $(gameView).html(shown.join(' '));
      }

      $(document).ready( function(e) {
        gameList = [];
        Tabletop.init( {
          key: '1SJr0dKWrsxPr2Y0D3NqLIfiS8Bnen7khEk5wsH6R2ZY',
          callback: buildList,
          simpleSheet: true
        });

        $('#searchNameField').keypress( function(e) {
          if (e.keyCode == 13) {
            searchName($('#searchNameField').val());
          }
        })

        $('#searchDevField').keypress( function(e) {
          if (e.keyCode == 13) {
            searchDev($('#searchDevField').val());
          }
        })
      })
    </script>
  </body>
</html>


<!-- game div -->
<!--
  width 650, height: 250
  name
  icon: 150 by 150
  developer
  screenshot on side: clicking on it brings up modal slideshow
  on the side (absolute position):
  tags: up to 2 per line or something :P
  external app store link on bottom
-->
